class Home {
  constructor() {
    this.shapes = [
      [new Rect(24, 24, 124, 124, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(172, 24, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(246, 24, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(172, 98, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(246, 98, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(24, 172, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(98, 172, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(172, 172, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(246, 172, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(24, 246, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(98, 246, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(172, 246, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(246, 246, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(24, 320, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(98, 320, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(172, 320, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(246, 320, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],

      [new Rect(Game.width - 24 + 24, 24, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 98, 24, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 172, 24, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 246, 24, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 24, 98, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 98, 98, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 172, 98, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 246, 98, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 24, 172, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],
      [new Rect(Game.width - 24 + 98, 172, 50, 50, 0), [2000, 4000, 'a', 0.009], [5000, 5500, 'xy', -10, 0]],

      [new Rect(0, 394, Game.width, 86, 0), [2000, 4000, 'a', 0.009]],
      [new Rect(0, 0, 0, 0, 0), [9000, null, 'end']]
    ]
  }

  draw() {
    Game.shapes = this.shapes

    Game.shapes.forEach((s, i) => {
      s[0].draw('255, 255, 255')

      if (s[0].alpha > 0.75) {
        Game.hits[i] = collideRectCircle(
          s[0].pos.x, s[0].pos.y, s[0].w, s[0].h,
          Game.bug.pos.x, Game.bug.pos.y, Game.bug.radius
        )
      }
    })

    this.update()
  }

  update() {
    Game.shapes.forEach((s) => {
      for (let i = 1; i < s.length; i++) {
        const start_time = s[i][0]
        const end_time = s[i][1]
        const prop = s[i][2]

        if (ellapsed(start_time, end_time)) {
          switch (prop) {
            case 'a':
              s[0].updateAlpha(s[i][3])
              break
            case 'wh':
              s[0].updateDimensions(s[i][3], s[i][4])
              break
            case 'xy':
              s[0].updateCoordinates(s[i][3], s[i][4])
              break
            case 'end':
              endScene()
              break
          }
        }
      }
    })
  }
}
