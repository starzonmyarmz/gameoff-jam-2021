class Music extends Scene{constructor(){super(),this.reset()}draw(){background(255),this.song_started||(this.startSong(messages),this.song_started=!0),Game.shapes=this.shapes,Game.shapes.forEach(((e,o)=>{e.update(),e.draw(),this.transition.alpha<5&&this.createCollision(e,o)})),this.transition.update(),this.transition.draw(),this.transition.q.length||this.song_stopped||(this.endSong(),this.song_stopped=!0),null!=this.transition.current||this.transition.q.length||this.endScene()}reset(){this.song_started=!1,this.song_stopped=!1,this.shapes=[];const e="#ff0000";let o=16;for(let a=0;a<7;a++){let a=random(48,120),r=16;this.shapes.push(new Poly({x:o,y:32,w:a,h:16,color:e},[{delay:21e3,duration:2e3,props:{y:-316}}])),o=o+a+r}this.shapes.push(new Poly({x:16,y:80,w:random(120,Game.width-40),h:32,color:e},[{delay:21e3,duration:2e3,props:{y:-268}}]));for(let o=0;o<2;o++)for(let a=0;a<8;a++)this.shapes.push(new Poly({x:16+112*a,y:140+140*o,w:96,h:96,color:e},[{delay:7e3,duration:200,props:{x:16+112*a-112}},{delay:1500,duration:200,props:{x:16+112*a-224}},{delay:1500,duration:200,props:{x:16+112*a-336}},{delay:1500,duration:200,props:{x:16+112*a-448}},{delay:1500,duration:200,props:{x:16+112*a-592}},{delay:4e3,duration:500,props:{x:16+112*a-336}},{delay:2400,duration:2e3,props:{y:140+140*o-348}},{delay:3e3,duration:5e3,props:{y:140+140*o-348-174}}]),new Poly({x:16+112*a,y:140+140*o+104,w:random(48,96),h:4,color:e},[{delay:7e3,duration:200,props:{x:16+112*a-112}},{delay:1500,duration:200,props:{x:16+112*a-224}},{delay:1500,duration:200,props:{x:16+112*a-336}},{delay:1500,duration:200,props:{x:16+112*a-448}},{delay:1500,duration:200,props:{x:16+112*a-592}},{delay:4e3,duration:500,props:{x:16+112*a-336}},{delay:2400,duration:2e3,props:{y:140+140*o+104-348}},{delay:3e3,duration:5e3,props:{y:140+140*o+104-348-174}}]),new Poly({x:16+112*a,y:140+140*o+112,w:random(48,96),h:4,color:e},[{delay:7e3,duration:200,props:{x:16+112*a-112}},{delay:1500,duration:200,props:{x:16+112*a-224}},{delay:1500,duration:200,props:{x:16+112*a-336}},{delay:1500,duration:200,props:{x:16+112*a-448}},{delay:1500,duration:200,props:{x:16+112*a-592}},{delay:4e3,duration:500,props:{x:16+112*a-336}},{delay:2400,duration:2e3,props:{y:140+140*o+112-348}},{delay:3e3,duration:5e3,props:{y:140+140*o+112-348-174}}]));this.shapes.push(new Poly({x:16,y:428,w:random(120,Game.width-40),h:32,color:e},[{delay:21e3,duration:2e3,props:{y:80}},{delay:3e3,duration:5e3,props:{y:-94}}]));for(let o=0;o<8;o++)this.shapes.push(new Poly({x:16,y:64*o+488,w:48,h:48,color:e},[{delay:21e3,duration:2e3,props:{y:64*o+488-348}},{delay:3e3,duration:5e3,props:{y:64*o+488-348-174}},{delay:5e3,duration:1e3,props:{y:64*o+488-348-174-242}}]),new Poly({x:80,y:64*o+488+14,w:random(100,Game.width-100),h:8,color:e},[{delay:21e3,duration:2e3,props:{y:64*o+488+14-348}},{delay:3e3,duration:5e3,props:{y:64*o+488+14-348-174}},{delay:5e3,duration:1e3,props:{y:64*o+488+14-348-174-242}}]),new Poly({x:80,y:64*o+488+30,w:random(100,Game.width-100),h:4,color:e},[{delay:21e3,duration:2e3,props:{y:64*o+488+30-348}},{delay:3e3,duration:5e3,props:{y:64*o+488+30-348-174}},{delay:5e3,duration:1e3,props:{y:64*o+488+30-348-174-242}}]));this.shapes.push(new Poly({x:16,y:1016,w:random(120,Game.width-40),h:32,color:e},[{delay:21e3,duration:2e3,props:{y:668}},{delay:3e3,duration:5e3,props:{y:494}},{delay:5e3,duration:1e3,props:{y:252}}]));for(let o=0;o<4;o++)this.shapes.push(new Poly({x:16+208*o,y:1076,w:192,h:128,color:e},[{delay:21e3,duration:2e3,props:{y:728}},{delay:3e3,duration:5e3,props:{y:554}},{delay:5e3,duration:1e3,props:{y:312}},{delay:2e3,duration:500,props:{x:16+208*o-208}},{delay:2e3,duration:500,props:{x:16+208*o-416}},{delay:2e3,duration:500,props:{x:16+208*o-530}},{delay:2e3,duration:500,props:{x:16+208*o-416}}]),new Poly({x:16+208*o,y:1212,w:random(48,96),h:4,color:e},[{delay:21e3,duration:2e3,props:{y:864}},{delay:3e3,duration:5e3,props:{y:690}},{delay:5e3,duration:1e3,props:{y:448}},{delay:2e3,duration:500,props:{x:16+208*o-208}},{delay:2e3,duration:500,props:{x:16+208*o-416}},{delay:2e3,duration:500,props:{x:16+208*o-530}},{delay:2e3,duration:500,props:{x:16+208*o-416}}]),new Poly({x:16+208*o,y:1220,w:random(48,96),h:4,color:e},[{delay:21e3,duration:2e3,props:{y:872}},{delay:3e3,duration:5e3,props:{y:698}},{delay:5e3,duration:1e3,props:{y:456}},{delay:2e3,duration:500,props:{x:16+208*o-208}},{delay:2e3,duration:500,props:{x:16+208*o-416}},{delay:2e3,duration:500,props:{x:16+208*o-530}},{delay:2e3,duration:500,props:{x:16+208*o-416}}]));this.transition=new Poly({x:0,y:0,w:Game.width,h:Game.height,color:255},[this.startBuffer(),{delay:0,duration:2e3,props:{alpha:0}},{delay:5e4,duration:2e3,props:{alpha:255}},this.endBuffer()])}}
