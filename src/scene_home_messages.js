class HomeMessages extends Scene{constructor(){super(),this.reset()}draw(){background(255),this.song_started||(this.startSong(home_messages),this.song_started=!0),this.tutorial_finished||(Game.shapes=this.tutorial_square,Game.shapes.forEach(((t,a)=>{t.update(),t.draw(),this.transition_tutorial_in.alpha<5&&this.createCollision(t,a)})),fill(0),textSize(12),textAlign(LEFT,TOP),textFont(text_regular),text("tilt your device\nto avoid colliding\nwith shapes",172,324),textSize(10),text("tap to continue",172,380)),this.transition_tutorial_in.update(),this.transition_tutorial_in.draw(),this.tutorial_finished&&(Game.shapes=this.shapes,Game.shapes.forEach(((t,a)=>{t.update(),t.draw(),this.transition_tutorial_out[0].alpha<5&&this.transition_shapes.alpha<5&&this.createCollision(t,a)})),this.transition_out.update(),this.transition_out.draw(),this.transition_shapes.update(),this.transition_shapes.draw(),this.transition_tutorial_out.forEach((t=>{t.update(),t.draw()}))),this.transition_shapes.q.length||this.song_stopped||(this.endSong(),this.song_stopped=!0),null!=this.transition_shapes.current||this.transition_shapes.q.length||(this.saveProgress("Messages"),this.endScene())}touchEnded(){this.tutorial_finished=!0}reset(){this.tutorial_finished=!1,this.song_started=!1,this.song_stopped=!1,this.shapes=[];const t=(Game.width-32)/4,a=(Game.height-32)/6;for(let s=0;s<layout.length;s++)for(let e=0;e<layout[s].length;e++)for(let i=0;i<layout[s][e].length;i++)0!==layout[s][e][i]&&this.shapes.push(new Poly({x:Game.width*s+28+t*i,y:a*e+28,w:48,h:48,color:getHomeColor(layout[s][e][i])},[{delay:6e3,duration:250,props:{x:28+t*i+Game.width*(s-1)}},{delay:4e3,duration:250,props:{x:28+t*i+Game.width*(s-2)}},{delay:4e3,duration:500,props:{x:28+t*i+Game.width*s}}]));this.transition_shapes=new Poly({x:0,y:0,w:Game.width,h:Game.height,color:255},[{delay:0,duration:0,props:{alpha:0}},{delay:16e3,duration:2e3,props:{alpha:255}},this.endBuffer()]),this.tutorial_square=[new Poly({x:172,y:252,w:48,h:48,color:"#1a73e8"},[])],this.transition_tutorial_in=new Poly({x:172,y:252,w:148,h:180,color:255,alpha:255},[this.startBuffer(),{delay:0,duration:2e3,props:{alpha:0}}]),this.transition_tutorial_out=[new Poly({x:0,y:0,w:172,h:Game.height,color:255,alpha:255},[{delay:0,duration:2e3,props:{alpha:0}}]),new Poly({x:220,y:0,w:100,h:300,color:255,alpha:255},[{delay:0,duration:2e3,props:{alpha:0}}]),new Poly({x:172,y:0,w:48,h:252,color:255,alpha:255},[{delay:0,duration:2e3,props:{alpha:0}}])],this.transition_out=new Poly({x:0,y:0,w:0,h:0,color:"#1a73e8"},[this.startBuffer(),{delay:14e3,duration:0,props:{x:172,y:252,w:48,h:48}},{delay:0,duration:250,props:{x:0,y:0,w:Game.width,h:Game.height}},this.endBuffer()])}}
